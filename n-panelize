# Copy this file into /usr/share/zsh/[-version-]/functions
# and add 'autoload v-panelize` to .zshrc
#
# This function somewhat reminds the panelize feature from Midnight Commander
# It allows browsing output of arbitrary command. Example usage:
# v-panelize ls /usr/local/bin
#
# Uses n-list

emulate -L zsh

zmodload zsh/curses
local IFS="
"

local list
local selected

NLIST_REMEMBER_STATE=0

# Check if there is proper input
if [ "$#" -lt 1 ]; then
    echo "Usage: n-panelize command ..."
    return 1
fi

list=( `"$@"` )
[ "$?" -ne 0 ] && return $?

n-list "${list[@]}"

if [ "$REPLY" -gt 0 ]; then
    selected="$reply[$REPLY]"
    echo "You have selected $selected"
fi

# vim: set filetype=zsh:
