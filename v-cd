# Copy this file into /usr/share/zsh/[-version-]/functions
# and add 'autoload v-cd` to .zshrc
#
# This function allows to choose a directory from pushd stack
#
# Uses v-list

emulate -L zsh

zmodload zsh/curses
local IFS="
"

local list
local list2
local result
local selected

VLIST_REMEMBER_STATE=0

list=( `dirs -p` )
list2=( `dirs -pl` )
v-list result "${list[@]}"

if [ "$result" -gt 0 ]; then
    selected="$list2[$result]"
    echo "You have selected $selected"
    setopt NO_AUTO_PUSHD
    cd "$selected"
    setopt AUTO_PUSHD
fi

# vim: set filetype=zsh:
